<app-container [config]="containerConfig">
  <div class="content">

    <div class="table-container clear">
      <table class="table" *ngIf="listAm&&scheduleAm&&listPm&&schedulePm">
        <thead>
        <tr>
          <th>排班时间</th>
          <th>是否上班</th>
          <th>号源库存</th>
          <th>排班操作</th>
          <th>原因</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let obj of scheduleAm;let i = index">
          <td>{{obj.reservationTime}}</td>
          <td>
            <span *ngIf="obj.workState">上班</span>
            <span *ngIf="!obj.workState">不上班</span>
          </td>
          <td>
            <input type="number" name="date" [(ngModel)]="obj.stock" class="time-input" [disabled]="flag"
                   (change)="resetNumber(scheduleAm, i)">
          </td>
          <td *ngIf="i===0" rowspan="3">
            <button md-raised-button *ngIf="listAm.workState" [disabled]="flag" (click)="setAmWorkState(false)">不上班
            </button>
            <button md-raised-button *ngIf="!listAm.workState" [disabled]="flag" (click)="setAmWorkState(true)">上班
            </button>
          </td>
          <td *ngIf="i===0" rowspan="3">
            <md-form-field float="never" style="width: 100%">
              <textarea style="width: 100%;height: 150px" mdInput placeholder="" [(ngModel)]="listAm.notice"
                        maxlength="50" [disabled]="flag"></textarea>
              <md-hint align="end">{{listAm.notice?.length}} / 50</md-hint>
            </md-form-field>
          </td>
        </tr>
        <tr *ngFor="let obj of schedulePm;let i = index">
          <td>{{obj.reservationTime}}</td>
          <td>
            <span *ngIf="obj.workState">上班</span>
            <span *ngIf="!obj.workState">不上班</span>
          </td>
          <td>
            <input type="number" name="date" [(ngModel)]="obj.stock" class="time-input" [disabled]="flag"
                   (change)="resetNumber(schedulePm, i)">
          </td>
          <td *ngIf="i===0" rowspan="3">
            <button md-raised-button *ngIf="listPm.workState" [disabled]="flag" (click)="setPmWorkState(false)">不上班
            </button>
            <button md-raised-button *ngIf="!listPm.workState" [disabled]="flag" (click)="setPmWorkState(true)">上班
            </button>
          </td>
          <td *ngIf="i===0" rowspan="3">
            <md-form-field float="never" style="width: 100%">
              <textarea style="width: 100%;height: 150px" mdInput placeholder="" [(ngModel)]="listPm.notice"
                        maxlength="50" [disabled]="flag"></textarea>
              <md-hint align="end">{{listPm.notice?.length}} / 50</md-hint>
            </md-form-field>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
    <div class="button-content">
      <button md-raised-button color="primary" (click)="saveDate()" *ngIf="!flag">保存</button>
    </div>
  </div>
</app-container>
